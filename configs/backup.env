# ==============================================================================
# Proxmox Backup – Esempio di configurazione (backup.env)
# Copia questo file, adatta i valori e mantienilo fuori dal controllo versione.
# ==============================================================================

# ----------------------------------------------------------------------
# Impostazioni generali
# ----------------------------------------------------------------------
BACKUP_ENABLED=true
ENABLE_GO_BACKUP=true
USE_COLOR=true
DEBUG_LEVEL=standard        # standard | advanced | extreme
DRY_RUN=true                # Metti a false per esecuzioni reali

# ----------------------------------------------------------------------
# Disk space
# ----------------------------------------------------------------------
MIN_DISK_SPACE_PRIMARY_GB=1
MIN_DISK_SPACE_SECONDARY_GB=1
MIN_DISK_SPACE_CLOUD_GB=1

# ----------------------------------------------------------------------
# Percorsi locali
# ----------------------------------------------------------------------
# BASE_DIR=/opt/proxmox-backup
BACKUP_PATH=${BASE_DIR}/backup-test
LOG_PATH=${BASE_DIR}/log-test
LOCK_PATH=${BASE_DIR}/lock
SECURE_ACCOUNT=${BASE_DIR}/secure_account

# ----------------------------------------------------------------------
# Compressione
# ----------------------------------------------------------------------
COMPRESSION_TYPE=xz         # none | gzip | xz | zstd
COMPRESSION_LEVEL=6
COMPRESSION_THREADS=0       # 0 = auto
COMPRESSION_MODE=standard   # fast | standard | maximum | ultra

# ----------------------------------------------------------------------
# Ottimizzazioni avanzate
# ----------------------------------------------------------------------
ENABLE_SMART_CHUNKING=false
ENABLE_DEDUPLICATION=false
ENABLE_PREFILTER=false
CHUNK_THRESHOLD_MB=50
CHUNK_SIZE_MB=10
PREFILTER_MAX_FILE_SIZE_MB=8

# ----------------------------------------------------------------------
# Esclusioni raccolta (pattern glob separati da spazi/virgole)
# ----------------------------------------------------------------------
# Esempio: *.log, */cache/**, /var/tmp/**
BACKUP_EXCLUDE_PATTERNS= */cache/**, /var/tmp/**

# ----------------------------------------------------------------------
# Storage secondario (fase 4 – lascia disabilitato se non usato)
# ----------------------------------------------------------------------
SECONDARY_ENABLED=false
SECONDARY_PATH=/mnt/secondary-backup
SECONDARY_RETENTION_DAYS=14

# ----------------------------------------------------------------------
# Cloud storage (fase 4 – rclone richiesto)
# ----------------------------------------------------------------------
CLOUD_ENABLED=false
CLOUD_REMOTE=rclone-remote:pbs-backups
CLOUD_RETENTION_DAYS=30

# ----------------------------------------------------------------------
# Politiche di retention locale
# ----------------------------------------------------------------------
LOCAL_RETENTION_DAYS=7

# ----------------------------------------------------------------------
# Notifiche (fase 4 – lascia disabilitato finché non configurato)
# ----------------------------------------------------------------------
TELEGRAM_ENABLED=false
TELEGRAM_TOKEN=
TELEGRAM_CHAT_ID=

EMAIL_ENABLED=false
EMAIL_RECIPIENTS=admin@example.com

# ----------------------------------------------------------------------
# Metriche / Prometheus
# ----------------------------------------------------------------------
METRICS_ENABLED=false
METRICS_PATH=${BASE_DIR}/metrics

# ----------------------------------------------------------------------
# Opzioni collector (tutte abilitate di default)
# ----------------------------------------------------------------------
# PVE
BACKUP_CLUSTER_CONFIG=true
BACKUP_PVE_FIREWALL=true
BACKUP_VZDUMP_CONFIG=true
BACKUP_PVE_ACL=true
BACKUP_PVE_JOBS=true
BACKUP_PVE_SCHEDULES=true
BACKUP_PVE_REPLICATION=true
BACKUP_PVE_BACKUP_FILES=true
BACKUP_CEPH_CONFIG=true
BACKUP_VM_CONFIGS=true

# PBS
BACKUP_DATASTORE_CONFIGS=true
BACKUP_USER_CONFIGS=true
BACKUP_REMOTE_CONFIGS=true
BACKUP_SYNC_JOBS=true
BACKUP_VERIFICATION_JOBS=true
BACKUP_TAPE_CONFIGS=true
BACKUP_PRUNE_SCHEDULES=true
BACKUP_PXAR_FILES=true

# Sistema
BACKUP_NETWORK_CONFIGS=true
BACKUP_APT_SOURCES=true
BACKUP_CRON_JOBS=true
BACKUP_SYSTEMD_SERVICES=true
BACKUP_SSL_CERTS=true
BACKUP_SYSCTL_CONFIG=true
BACKUP_KERNEL_MODULES=true
BACKUP_FIREWALL_RULES=true
BACKUP_INSTALLED_PACKAGES=true
BACKUP_SCRIPT_DIR=true
BACKUP_CRITICAL_FILES=true
BACKUP_SSH_KEYS=true
BACKUP_ZFS_CONFIG=true
BACKUP_ROOT_HOME=true
BACKUP_SCRIPT_REPOSITORY=true

# ----------------------------------------------------------------------
# Sicurezza e permessi
# ----------------------------------------------------------------------
SKIP_PERMISSION_CHECK=false

# ----------------------------------------------------------------------
# Placeholder per future integrazioni
# ----------------------------------------------------------------------
RSYNC_OPTIONS=--archive --delete
RCLONE_OPTIONS=--transfers=4 --checkers=8

# ==============================================================================
# Fine file – ricorda di impostare permessi restrittivi (es. chmod 600).
# ==============================================================================***
