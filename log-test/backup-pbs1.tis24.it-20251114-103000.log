[2025-11-14 10:30:00] INFO     Log file opened: /opt/proxmox-backup-go/log-test/backup-pbs1.tis24.it-20251114-103000.log
[2025-11-14 10:30:00] INFO     Environment: pbs 3.4.6
[2025-11-14 10:30:00] INFO     Backup enabled: true
[2025-11-14 10:30:00] INFO     Debug level: INFO
[2025-11-14 10:30:00] INFO     Compression: xz (level 9, mode ultra)
[2025-11-14 10:30:00] INFO     Base directory: /opt/proxmox-backup-go (auto-detected from executable path)
[2025-11-14 10:30:00] INFO     Configuration file: ./configs/backup.env (default path)
[2025-11-14 10:30:00] INFO     Server ID: 1173879437561689
[2025-11-14 10:30:00] INFO     Server MAC Address: bc:24:11:41:0d:18
[2025-11-14 10:30:00] INFO     Server Telegram: 200 - Registration active
[2025-11-14 10:30:00] INFO     Running security preflight checks...
[2025-11-14 10:30:00] INFO     Checking dependencies...
[2025-11-14 10:30:00] INFO     Dependencies check completed: all required dependencies available (optional missing: ceph)
[2025-11-14 10:30:00] WARNING  Optional dependency ceph missing: Ceph configuration collection enabled
[2025-11-14 10:30:00] INFO     Security checks completed: 1 warning(s), 0 error(s)
[2025-11-14 10:30:00] INFO     Initializing backup orchestrator...
[2025-11-14 10:30:00] INFO     ‚úì Orchestrator initialized
[2025-11-14 10:30:00] INFO     Verifying directory structure...
[2025-11-14 10:30:00] INFO     ‚úì Backup directory exists: /opt/proxmox-backup-go/backup-test
[2025-11-14 10:30:00] INFO     ‚úì Log directory exists: /opt/proxmox-backup-go/log-test
[2025-11-14 10:30:00] INFO     ‚úì Secondary log directory exists: /opt/secondary-backup-go/log-secondary-test
[2025-11-14 10:30:00] INFO     ‚úì Lock directory exists: /opt/proxmox-backup-go/lock
[2025-11-14 10:30:00] INFO     Initializing storage backends...
[2025-11-14 10:30:00] INFO     Path Primary: /opt/proxmox-backup-go/backup-test -> Filesystem: ext4 (supports ownership) [mount: /]
[2025-11-14 10:30:00] INFO     ‚úì Local storage initialized (present 7 backups, retention 7 backups)
[2025-11-14 10:30:00] INFO     Path Secondary: /opt/secondary-backup-go/backup-secondary-test -> Filesystem: ext4 (supports ownership) [mount: /]
[2025-11-14 10:30:00] INFO     ‚úì Secondary storage initialized (present 9 backups, retention 14 backups)
[2025-11-14 10:30:00] INFO     Path Cloud: disabled
[2025-11-14 10:30:00] INFO     Initializing notification channels...
[2025-11-14 10:30:00] INFO     ‚úì Telegram notifications initialized (mode: centralized)
[2025-11-14 10:30:00] INFO     ‚úì Email notifications initialized (method: relay)
[2025-11-14 10:30:00] INFO     Webhook notifications: disabled
[2025-11-14 10:30:00] INFO     Validating bash script environment...
[2025-11-14 10:30:00] INFO     ‚úì Bash scripts directory exists: /opt/proxmox-backup/script
[2025-11-14 10:30:00] INFO     Storage configuration:
[2025-11-14 10:30:00] INFO       Primary: /opt/proxmox-backup-go/backup-test [ext4]
[2025-11-14 10:30:00] INFO       Secondary storage: /opt/secondary-backup-go/backup-secondary-test [ext4]
[2025-11-14 10:30:00] INFO       Cloud storage: disabled
[2025-11-14 10:30:00] INFO     Log configuration:
[2025-11-14 10:30:00] INFO       Primary: /opt/proxmox-backup-go/log-test
[2025-11-14 10:30:00] INFO       Secondary: /opt/secondary-backup-go/log-secondary-test
[2025-11-14 10:30:00] INFO       Cloud: disabled
[2025-11-14 10:30:00] INFO     Notification configuration:
[2025-11-14 10:30:00] INFO       Telegram: true
[2025-11-14 10:30:00] INFO       Email: true
[2025-11-14 10:30:00] INFO       Metrics: false
[2025-11-14 10:30:00] INFO     Running pre-backup validation checks...
[2025-11-14 10:30:00] INFO     ‚úì Directories: All required directories exist
[2025-11-14 10:30:00] INFO     ‚úì Disk Space: Sufficient disk space on all configured destinations
[2025-11-14 10:30:00] INFO     ‚úì Permissions: All directories are writable
[2025-11-14 10:30:00] INFO     ‚úì Lock File: Lock file acquired successfully
[2025-11-14 10:30:00] INFO     All pre-backup checks passed
[2025-11-14 10:30:00] INFO     Starting Go backup orchestration...
[2025-11-14 10:30:00] INFO     Starting Go-based backup orchestration for pbs
[2025-11-14 10:30:00] INFO     Cleanup of previous execution files completed successfully (2 item(s) removed: 1 file(s), 1 dir(s))
[2025-11-14 10:30:00] INFO     Step 1/8: [34mInitializing backup statistics and temporary workspace[0m
[2025-11-14 10:30:00] INFO     Step 2/8: [34mCollection of configuration files and optimizations[0m
[2025-11-14 10:30:00] INFO     Collecting configuration files...
[2025-11-14 10:30:00] INFO     Starting backup collection for pbs
[2025-11-14 10:30:00] INFO     Collecting PBS configurations
[2025-11-14 10:30:00] INFO     PBS configuration collection completed
[2025-11-14 10:30:00] INFO     Collecting system information
[2025-11-14 10:30:01] INFO     System information collection completed
[2025-11-14 10:30:01] INFO     Collection completed: 652 files (3.2 MiB), 0 failed, 47 dirs created
[2025-11-14 10:30:01] INFO     Running backup optimizations on collected data...
[2025-11-14 10:30:01] INFO     Running backup optimizations (chunking=true dedup=true prefilter=true)
[2025-11-14 10:30:01] INFO     Deduplication completed: 35 duplicates replaced
[2025-11-14 10:30:01] INFO     Prefilter completed: 195 files optimized
[2025-11-14 10:30:01] INFO     Chunking completed: 0 large files processed
[2025-11-14 10:30:01] INFO     Step 3/8: [34mCreation of compressed archive[0m
[2025-11-14 10:30:01] INFO     Creating compressed archive...
[2025-11-14 10:30:01] INFO     Creating compressed archive with xz (level 9, mode ultra, threads auto)
[2025-11-14 10:30:01] INFO     [XZ] xz: Reduced the number of threads from 4 to 3 to not exceed the memory usage limit of 3,994 MiB
[2025-11-14 10:30:03] INFO     Step 4/8: [34mVerification of archive and metadata generation[0m
[2025-11-14 10:30:03] INFO     Step 5/8: [34mBundling of archive, checksum and metadata[0m
[2025-11-14 10:30:03] INFO     ‚úì Archive created and verified
[2025-11-14 10:30:03] INFO     Step 6/8: [34mDispatching archive to 2 storage target(s)[0m
[2025-11-14 10:30:03] INFO     Local Storage: Storing backup...
[2025-11-14 10:30:03] INFO     ‚úì Local Storage: Backup stored successfully
[2025-11-14 10:30:03] INFO     Local Storage: Applying retention policy (keeping 7 backups)...
[2025-11-14 10:30:03] INFO     Local storage: 8 backups found, retention limit is 7, deleting 1 oldest backups
[2025-11-14 10:30:03] INFO     ‚úì Local Storage: Deleted 1 old backups
[2025-11-14 10:30:03] INFO     Local Storage statistics:
[2025-11-14 10:30:03] INFO       Total backups: 7
[2025-11-14 10:30:03] INFO       Total size: 7.3 MiB
[2025-11-14 10:30:03] INFO       Filesystem: ext4
[2025-11-14 10:30:03] INFO     ‚úì Local Storage operations completed
[2025-11-14 10:30:03] INFO     Secondary Storage: Storing backup...
[2025-11-14 10:30:03] INFO     ‚úì Secondary Storage: Backup stored successfully
[2025-11-14 10:30:03] INFO     Secondary Storage: Applying retention policy (keeping 14 backups)...
[2025-11-14 10:30:03] INFO     Secondary Storage statistics:
[2025-11-14 10:30:03] INFO       Total backups: 10
[2025-11-14 10:30:03] INFO       Total size: 10.4 MiB
[2025-11-14 10:30:03] INFO       Filesystem: ext4
[2025-11-14 10:30:03] INFO     ‚úì Secondary Storage operations completed
[2025-11-14 10:30:03] INFO     Step 7/8: [34mNotifications - dispatching channels[0m
[2025-11-14 10:30:03] INFO     Starting Telegram notification...
[2025-11-14 10:30:04] INFO     ‚úì Telegram notification sent successfully (took 245.490004ms)
[2025-11-14 10:30:04] INFO     Starting Email notification...
[2025-11-14 10:30:04] WARNING  WARNING: Cloud relay failed: rate limit exceeded: Daily quota exceeded for this server (3/day). Write me on github for higher limits
[2025-11-14 10:30:04] INFO     Attempting fallback to sendmail...
[2025-11-14 10:30:04] WARNING  ‚ö†Ô∏è Email sent via fallback after relay failure
[2025-11-14 10:30:04] INFO     Email provider confirmed delivery to homelab@tis24.it via sendmail fallback
[2025-11-14 10:30:04] WARNING  ‚ö†Ô∏è Email notification sent via fallback in 321.668591ms
[2025-11-14 10:30:04] INFO     Step 8/8: [34mLog file management - close, copy, and rotate[0m
[2025-11-14 10:30:04] INFO     Closing log file: /opt/proxmox-backup-go/log-test/backup-pbs1.tis24.it-20251114-103000.log
